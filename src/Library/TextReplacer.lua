
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 01.06.2020 16:02
---
function string.gsuber(data, str)
	for k, v in pairs(data) do
		str = string.gsub(str, '[' .. k .. ']', v)
		str = string.gsub(str, k, v)
	end
	return str
end

do
	local GetAbilityDescriptionOriginalTable = {} ---@type table
	function GetAbilityDescriptionOriginal(id)
		if GetAbilityDescriptionOriginalTable[id] == nil then
			GetAbilityDescriptionOriginalTable[id] = BlzGetAbilityExtendedTooltip(id,0)
		end
		return GetAbilityDescriptionOriginalTable[id]
	end
	function UnitRefreshAbilityTooltip(hero,id)
		local NativeString=GetAbilityDescriptionOriginal(id)
		local data=HERO[GetPlayerId(GetOwningPlayer(hero))]
		if GetLocalPlayer()==GetOwningPlayer(hero) then
			if id==SpellIDQ then
				local dmg=(BlzGetUnitBaseDamage(hero,0)+data.HeroGreenDamage)*AbilityStats.Q.damage
				NativeString =string.gsub(NativeString,'dmg',dmg)
			end
			if id==SpellIDW then
				local dmg= GetHeroStr(hero, true) * AbilityStats.W.damage
				NativeString =string.gsub(NativeString,'dmg',dmg)
			end
			if id==SpellIDE then
				local dmg= BlzGetUnitBaseDamage(hero,0)+data.HeroGreenDamage
				NativeString =string.gsub(NativeString,'dmg',dmg)
			end
			if id==SpellIDR then
				local count= AbilityStats.R.count
				NativeString =string.gsub(NativeString,'count',count)
			end
			if id==SpellIDS then
				local dmg= data.bonusCD
				NativeString =string.gsub(NativeString,'dmg',dmg)
			end

		end
		BlzSetAbilityExtendedTooltip(id,NativeString,0)

	end
end

function AllAbilityRefresh(hero)
	UnitRefreshAbilityTooltip(hero,SpellIDQ)
	UnitRefreshAbilityTooltip(hero,SpellIDW)
	UnitRefreshAbilityTooltip(hero,SpellIDE)
	UnitRefreshAbilityTooltip(hero,SpellIDR)
	UnitRefreshAbilityTooltip(hero,SpellIDS)
end